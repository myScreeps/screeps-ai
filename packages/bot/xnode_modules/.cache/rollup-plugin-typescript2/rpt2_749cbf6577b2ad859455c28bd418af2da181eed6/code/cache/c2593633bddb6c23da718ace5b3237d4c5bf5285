{"code":"/**\r\n * Priority based scheduler\r\n * Will yield highest priority thread first, untill done.\r\n * Lower number means higher priority, modelled after Linux system priorities.\r\n */\r\nexport class PriorityScheduler {\r\n    constructor(defaultPriority) {\r\n        this.defaultPriority = defaultPriority;\r\n        this.pids = new Map();\r\n    }\r\n    clampPriority(requestedPriority) {\r\n        return Math.min(139, Math.max(requestedPriority, 0));\r\n    }\r\n    add(pid, priority) {\r\n        this.pids.set(pid, priority !== null && priority !== void 0 ? priority : this.defaultPriority);\r\n    }\r\n    remove(pid) {\r\n        this.pids.delete(pid);\r\n    }\r\n    *run(quota) {\r\n        const pidsToRun = [...this.pids]\r\n            .sort((a, b) => a[1] - b[1])\r\n            .map(([pid]) => pid);\r\n        for (const pid of pidsToRun) {\r\n            while (quota() > 0) {\r\n                if (!this.pids.has(pid)) {\r\n                    break;\r\n                }\r\n                const runAgain = yield pid;\r\n                if (!runAgain) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=PriorityScheduler.js.map","references":["C:/Users/Neal/AppData/Local/Screeps/scripts/Grunt/screepsOS5/screeps-ai/packages/os/src/system.ts","C:/Users/Neal/AppData/Local/Screeps/scripts/Grunt/screepsOS5/screeps-ai/packages/os/src/Scheduler.ts"],"map":"{\"version\":3,\"file\":\"PriorityScheduler.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../os/src/PriorityScheduler.ts\"],\"names\":[],\"mappings\":\"AAGA;;;;GAIG;AACH,MAAM,OAAO,iBAAiB;IAG5B,YAAqB,eAAyB;QAAzB,oBAAe,GAAf,eAAe,CAAU;QAFtC,SAAI,GAAG,IAAI,GAAG,EAAiB,CAAC;IAES,CAAC;IAElD,aAAa,CAAC,iBAA2B;QACvC,OAAO,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,CAAC,GAAG,CAAC,iBAAiB,EAAE,CAAC,CAAC,CAAa,CAAC;IACnE,CAAC;IAED,GAAG,CAAC,GAAQ,EAAE,QAAyB;QACrC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,QAAQ,aAAR,QAAQ,cAAR,QAAQ,GAAI,IAAI,CAAC,eAAe,CAAC,CAAC;IACvD,CAAC;IAED,MAAM,CAAC,GAAQ;QACb,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;IACxB,CAAC;IAED,CAAC,GAAG,CAAC,KAAmB;QACtB,MAAM,SAAS,GAAG,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC;aAC7B,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;aAC3B,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC;QAEvB,KAAK,MAAM,GAAG,IAAI,SAAS,EAAE;YAC3B,OAAO,KAAK,EAAE,GAAG,CAAC,EAAE;gBAClB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;oBACvB,MAAM;iBACP;gBAED,MAAM,QAAQ,GAAG,MAAM,GAAG,CAAC;gBAC3B,IAAI,CAAC,QAAQ,EAAE;oBACb,MAAM;iBACP;aACF;SACF;IACH,CAAC;CACF\"}"}
